<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8">
  <title>Práctica 13 ejercicio 1</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
</head>

<body class="container-fluid" data-bs-theme="light">
  <header class="row mb-4 p-2 text-primary-emphasis bg-primary-subtle border border-primary-subtle">
    <a id="toggle-dark-mode" class="col text-start" href="#" onclick="toggle_dark_mode(this);">
      <i class="bi bi-moon-fill"></i>
    </a>
    <span class="col text-center">Creando imagen a partir de un contenedor</span>
    <span class="col text-end">17/02/2023</span>
  </header>
  <div class="container">
    <main>
      <h1 class="mb-3">Descripción</h1>
      <p>En esta práctica, aprenderemos a crear nuestras imágenes a partir de un contenedor en Docker para aprender a
        trabajar con el ciclo de vida de nuestra aplicación.</p>
      <script async id="asciicast-NjQHIAszoWtsPS7r5yeVN8LxU"
        src="https://asciinema.org/a/NjQHIAszoWtsPS7r5yeVN8LxU.js"></script>
      <h1 class="mb-3">Paso a paso</h1>
      <div class="accordion mb-4" id="accordion">
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingOne">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
              aria-controls="collapseOne" aria-expanded="true">
              Comando 1
            </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne">
            <div class="accordion-body row">
              <a onclick="startAt(1);" class="col-1 blue-500"><i class="bi bi-play-circle-fill"
                  style="font-size: 20px;"></i></a>
              <p class="col-11">
                Creamos un nuevo contenedor interactivo llamado <code>p13_ej1</code> partiendo de una imagen de
                <code>Debian</code>.
              </p>
            </div>
          </div>
        </div>

        <div class="accordion-item">
          <h2 class="accordion-header" id="headingTwo">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo"
              aria-controls="collapseTwo" aria-expanded="true">
              Comando 2
            </button>
          </h2>
          <div id="collapseTwo" class="accordion-collapse collapse show" aria-labelledby="headingTwo">
            <div class="accordion-body row">
              <a onclick="startAt(6);" class="col-1 blue-500"><i class="bi bi-play-circle-fill"
                  style="font-size: 20px;"></i></a>
              <p class="col-11">
                Instalamos los comandos de red <code>inetutils-ping iproute2 dnsutils</code>.
              </p>
            </div>
          </div>
        </div>

        <div class="accordion-item">
          <h2 class="accordion-header" id="headingThree">
            <button class="accordion-button" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapseThree" aria-expanded="true"
              aria-controls="collapseThree">
              Comando 3
            </button>
          </h2>
          <div id="collapseThree" class="accordion-collapse collapse show" aria-labelledby="headingThree">
            <div class="accordion-body row">
              <a onclick="startAt(30);" class="col-1 blue-500"><i class="bi bi-play-circle-fill"
                  style="font-size: 20px;"></i></a>
              <p class="col-11">
                Construimos la imagen a partir del contenedor. La imagen se llamará
                <code>dalde666/comandos_redes</code>. Es imprescindible seguir el formato <code>usuario/imagen</code>
                para poder subirla a <b>Docker Hub</b>.
              </p>
            </div>
          </div>
        </div>

        <div class="accordion-item">
          <h2 class="accordion-header" id="headingFour">
            <button class="accordion-button" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapseFour" aria-expanded="true"
              aria-controls="collapseFour">
              Comando 4
            </button>
          </h2>
          <div id="collapseFour" class="accordion-collapse collapse show" aria-labelledby="headingFour">
            <div class="accordion-body row">
              <a onclick="startAt(37);" class="col-1 blue-500"><i class="bi bi-play-circle-fill"
                  style="font-size: 20px;"></i></a>
              <p class="col-11">
                Subimos la imagen al repositorio de contenedores <b>Docker Hub</b>.
              </p>
            </div>
          </div>
        </div>

        <div class="accordion-item">
          <h2 class="accordion-header" id="headingFive">
            <button class="accordion-button" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapseFive" aria-expanded="true"
              aria-controls="collapseFive">
              Comandos 5, 6 y 7
            </button>
          </h2>
          <div id="collapseFive" class="accordion-collapse collapse show" aria-labelledby="headingFive">
            <div class="accordion-body row">
              <a onclick="startAt(49);" class="col-1 blue-500"><i class="bi bi-play-circle-fill"
                  style="font-size: 20px;"></i></a>
              <p class="col-11">
                Eliminamos la imagen, comprobamos que se haya subido al repositorio y por último, descargamos la versión
                que acabamos de subir.
              </p>
            </div>
          </div>
        </div>

        <div class="accordion-item">
          <h2 class="accordion-header" id="headingSix">
            <button class="accordion-button" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapseSix" aria-expanded="true"
              aria-controls="collapseSix">
              Comandos 8 y 9
            </button>
          </h2>
          <div id="collapseSix" class="accordion-collapse collapse show" aria-labelledby="headingSix">
            <div class="accordion-body row">
              <a onclick="startAt(68);" class="col-1 blue-500"><i class="bi bi-play-circle-fill"
                  style="font-size: 20px;"></i></a>
              <p class="col-11">
                Creamos un nuevo contenedor llamado <code>mis_comandos_redes</code> donde probamos que la imagen cuente
                con los comandos de red que instalamos en pasos anteriores.
              </p>
            </div>
          </div>
        </div>
        <!-- Accordion's end -->
      </div>
    </main>
  </div>
  <footer class="row p-2 text-primary-emphasis bg-primary-subtle border border-primary-subtle">
    <span class="col-1 text-start">Dalde</span>
    <span class="col-11 text-end align-self-center">Desarrollo de aplicaciones web</span>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
    crossorigin="anonymous"></script>
  <script>
    /** Cambia el atributo src del iframe haciendo que se recargue y se reproduzca
     * automáticamente en el tiempo especificado.
     * seg: tiempo de inicio del vídeo
    */
    function startAt(seg) {
      // asciinema iframe
      const iframe = document.getElementsByTagName("iframe")[0];
      iframe.src = `https://asciinema.org/a/NjQHIAszoWtsPS7r5yeVN8LxU/iframe?startAt=${seg}`;
      // Desplazarse al nodo
      iframe.scrollIntoView();
    }

    /** Activar/desactivar modo oscuro y cambiar el icono correspondiente */
    function toggle_dark_mode(nodo) {
      if (document.body.getAttribute("data-bs-theme") == "dark") {
        document.body.setAttribute("data-bs-theme", "light");
        nodo.children[0].className = "bi bi-moon-fill";
      } else {
        document.body.setAttribute("data-bs-theme", "dark");
        nodo.children[0].className = "bi bi-brightness-high-fill";
      }
    }

    // Mover el scroll hacia el iframe cuando se situe el ratón encima.
    // Al hacer clic no funciona por ser un iframe de otro dominio.
    // Creamos un intervalo para asegurar que al iframe le dé tiempo a
    // cargarse.
    // window.setTimeout(move_to_iframe, 250);
    // function move_to_iframe() {
    //   const iframe = document.getElementsByTagName("iframe")[0];
    //   iframe.addEventListener("mouseenter", () => {
    //     iframe.scrollIntoView();
    //   });
    // }
  </script>
</body>

</html>